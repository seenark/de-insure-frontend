(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(5075)}])},5810:function(e,n,r){"use strict";r.d(n,{s:function(){return t},n:function(){return d}});var t,a=r(4051),u=r.n(a),c=r(6076),s=r(7294),i=r(428),o=r(8742);function l(e,n,r,t,a,u,c){try{var s=e[u](c),i=s.value}catch(o){return void r(o)}s.done?n(i):Promise.resolve(i).then(t,a)}function f(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var u=e.apply(n,r);function c(e){l(u,t,a,c,s,"next",e)}function s(e){l(u,t,a,c,s,"throw",e)}c(void 0)}))}}function d(){var e=(0,o.K)().signer,n=(0,s.useCallback)((function(){return function(){var n=f(u().mark((function n(){var r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",Promise.reject("no account"));case 2:return r=new c.CH(i.n.address,i.n.abi,e),n.abrupt("return",r);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[e]),r=(0,s.useCallback)((function(e,r,t){return function(){var a=f(u().mark((function a(){var c,s;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n();case 2:return c=a.sent,a.next=5,c.createPackage(1e6*e,1e6*r,1e6*t);case 5:return s=a.sent,a.next=8,s.wait();case 8:return a.abrupt("return",s.hash);case 9:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()()}),[n]),t=(0,s.useCallback)((function(){return function(){var e=f(u().mark((function e(){var r,t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:return r=e.sent,e.next=5,r.fetchAllPackage();case 5:return t=e.sent,e.abrupt("return",t.map((function(e){return{id:e.id.toNumber(),packagePrice:e.packagePrice.toNumber()/1e6,cancelPrice:e.cancelPrice.toNumber()/1e6,delayPrice:e.deleyPricePerSecond.toNumber()/1e6}})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[n]),a=(0,s.useCallback)((function(e,r,t,a){return function(){var c=f(u().mark((function c(){var s,i;return u().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,n();case 2:return s=u.sent,u.next=5,s.createNewFlight(e,r,t,a);case 5:return i=u.sent,u.next=8,i.wait();case 8:return u.abrupt("return",i.hash);case 9:case"end":return u.stop()}}),c)})));return function(){return c.apply(this,arguments)}}()()}),[n]),l=(0,s.useCallback)((function(e,r){return function(){var t=f(u().mark((function t(){var a,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n();case 2:return a=t.sent,t.next=5,a.setFlightLandedTime(e,r);case 5:return c=t.sent,t.next=8,c.wait();case 8:return t.abrupt("return",c.hash);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[n]),d=(0,s.useCallback)((function(e){return f(u().mark((function r(){var t,a,c;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n();case 2:return t=r.sent,r.next=5,t.flightIdToFlight(e);case 5:return a=r.sent,c={flightNumber:a.flightNumber,status:a.status,landedTime:new Date(1e3*a.landedTime.toNumber()),shouldLandTime:new Date(1e3*a.shouldLandTime.toNumber()),takeoffTime:new Date(1e3*a.takeoffTime.toNumber())},r.abrupt("return",c);case 8:case"end":return r.stop()}}),r)})))()}),[n]),p=(0,s.useCallback)((function(e,r){return f(u().mark((function t(){var a,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n();case 2:return a=t.sent,t.next=5,a.makePurchase(e,r);case 5:return c=t.sent,t.next=8,c.wait();case 8:return t.abrupt("return",c.hash);case 9:case"end":return t.stop()}}),t)})))()}),[n]),h=(0,s.useCallback)((function(e){return f(u().mark((function r(){var t,a;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n();case 2:return t=r.sent,r.next=5,t.fetchYourPurchases(e);case 5:return a=r.sent,r.abrupt("return",a.map((function(e){return{id:e.id.toNumber(),flightId:e.flightId,completed:e.completed,packageId:e.packageId.toNumber(),customerAddress:e.customerAddress}})));case 7:case"end":return r.stop()}}),r)})))()}),[n]),v=(0,s.useCallback)((function(e){return f(u().mark((function r(){var t,a;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n();case 2:return t=r.sent,r.next=5,t.claim(e);case 5:return a=r.sent,r.next=8,a.wait();case 8:return r.abrupt("return",a.hash);case 9:case"end":return r.stop()}}),r)})))()}),[n]);return{getTokenContract:n,createPackage:r,getPackages:t,createFlight:a,setFlightLanddedTime:l,getFlightDetailByFlightNumber:d,purchaseInsurance:p,getPurchases:h,claim:v}}!function(e){e[e.TAKEOFF=1]="TAKEOFF",e[e.LANDED=2]="LANDED",e[e.CANCEL=3]="CANCEL"}(t||(t={}))},9532:function(e,n,r){"use strict";r.d(n,{d:function(){return d}});var t=r(4051),a=r.n(t),u=r(7294),c=r(6076),s=r(1046),i=r(8742),o=r(428);function l(e,n,r,t,a,u,c){try{var s=e[u](c),i=s.value}catch(o){return void r(o)}s.done?n(i):Promise.resolve(i).then(t,a)}function f(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var u=e.apply(n,r);function c(e){l(u,t,a,c,s,"next",e)}function s(e){l(u,t,a,c,s,"throw",e)}c(void 0)}))}}function d(){var e=(0,i.K)().signer,n=(0,u.useCallback)((function(){return function(){var n=f(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",Promise.reject("no account"));case 2:return r=new c.CH(o.r.address,o.r.abi,e),n.abrupt("return",r);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[e]),r=(0,u.useCallback)((function(){return function(){var e=f(a().mark((function e(){var r,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:return r=e.sent,e.next=5,r.approve(o.n.address,s.Bz);case 5:return t=e.sent,e.next=8,t.wait();case 8:return e.abrupt("return",t.hash);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[n]),t=(0,u.useCallback)((function(e,r){return function(){var t=f(a().mark((function t(){var u,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n();case 2:return u=t.sent,t.next=5,u.mint(e,1*r*1e6);case 5:return c=t.sent,t.next=8,c.wait();case 8:return t.abrupt("return",c.hash);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[n]),l=(0,u.useCallback)((function(e,n,r){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ERC20";try{var a=window.ethereum.request({method:"wallet_watchAsset",params:{type:t,options:{address:e,symbol:n,decimals:r,image:""}}});a?console.log("Thanks for your interest!"):console.log("Your loss!")}catch(u){return Promise.reject("not found")}}),[]);return{getTokenContract:n,approve:r,addTokenToWallet:l,mint:t}}},5075:function(e,n,r){"use strict";r.r(n);var t=r(4051),a=r.n(t),u=r(5893),c=r(7294),s=r(5810),i=r(9532);function o(e,n,r,t,a,u,c){try{var s=e[u](c),i=s.value}catch(o){return void r(o)}s.done?n(i):Promise.resolve(i).then(t,a)}n.default=function(){var e=(0,i.d)().approve,n=(0,s.n)(),r=n.getPackages,t=n.purchaseInsurance,l=(0,c.useState)([]),f=l[0],d=l[1],p=(0,c.useState)(),h=p[0],v=p[1];(0,c.useEffect)((function(){(function(){var e,n=(e=a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:n=e.sent,d(n);case 4:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,a){var u=e.apply(n,r);function c(e){o(u,t,a,c,s,"next",e)}function s(e){o(u,t,a,c,s,"throw",e)}c(void 0)}))});return function(){return n.apply(this,arguments)}})()()}),[r]);var m=(0,c.useState)(""),x=m[0],w=m[1];return(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-[2rem]",children:"Polygon testnet"}),(0,u.jsx)("section",{className:"mt-8 flex justify-center",children:(0,u.jsx)("div",{className:"card w-[50vw] bg-base-300 shadow-xl",children:(0,u.jsxs)("div",{className:"card-body",children:[(0,u.jsx)("h2",{className:"card-title",children:"Purchase"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"",children:"Package"}),(0,u.jsx)("select",{className:"select w-full max-w-xs select-warning",value:h?h.id:"",onChange:function(e){var n=f.find((function(n){return n.id===Number.parseInt(e.target.value)}));n&&v(n)},children:f.map((function(e,n){return(0,u.jsxs)("option",{value:e.id,children:["Package ",e.id]},n)}))}),(0,u.jsxs)("div",{children:["PackagePrice: ",null===h||void 0===h?void 0:h.packagePrice," | CancelPrice:"," ",null===h||void 0===h?void 0:h.cancelPrice," | Delay price:"," ",null===h||void 0===h?void 0:h.delayPrice]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"",children:"Flight number"}),(0,u.jsx)("input",{type:"text",placeholder:"Type here",className:"input input-bordered input-warning w-full max-w-xs",value:x,onChange:function(e){return w(e.target.value)}})]}),(0,u.jsxs)("div",{className:"flex justify-between card-actions",children:[(0,u.jsx)("button",{className:"btn btn-error",onClick:e,children:"Approve USDT"}),(0,u.jsx)("button",{className:"btn btn-primary",onClick:function(){if(h&&""!==x)return t(x,h.id)},children:"Buy Now"})]})]})})})]})}}},function(e){e.O(0,[294,428,774,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);