(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{2347:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return n(4544)}])},5810:function(e,t,n){"use strict";n.d(t,{s:function(){return r},n:function(){return h}});var r,a=n(4051),c=n.n(a),s=n(6076),u=n(7294),i=n(428),o=n(8742);function l(e,t,n,r,a,c,s){try{var u=e[c](s),i=u.value}catch(o){return void n(o)}u.done?t(i):Promise.resolve(i).then(r,a)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function s(e){l(c,r,a,s,u,"next",e)}function u(e){l(c,r,a,s,u,"throw",e)}s(void 0)}))}}function h(){var e=(0,o.K)().signer,t=(0,u.useCallback)((function(){return function(){var t=d(c().mark((function t(){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",Promise.reject("no account"));case 2:return n=new s.CH(i.n.address,i.n.abi,e),t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e]),n=(0,u.useCallback)((function(e,n,r){return function(){var a=d(c().mark((function a(){var s,u;return c().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t();case 2:return s=a.sent,a.next=5,s.createPackage(1e6*e,1e6*n,1e6*r);case 5:return u=a.sent,a.next=8,u.wait();case 8:return a.abrupt("return",u.hash);case 9:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()()}),[t]),r=(0,u.useCallback)((function(){return function(){var e=d(c().mark((function e(){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return n=e.sent,e.next=5,n.fetchAllPackage();case 5:return r=e.sent,e.abrupt("return",r.map((function(e){return{id:e.id.toNumber(),packagePrice:e.packagePrice.toNumber()/1e6,cancelPrice:e.cancelPrice.toNumber()/1e6,delayPrice:e.deleyPricePerSecond.toNumber()/1e6}})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]),a=(0,u.useCallback)((function(e,n,r,a){return function(){var s=d(c().mark((function s(){var u,i;return c().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,t();case 2:return u=c.sent,c.next=5,u.createNewFlight(e,n,r,a);case 5:return i=c.sent,c.next=8,i.wait();case 8:return c.abrupt("return",i.hash);case 9:case"end":return c.stop()}}),s)})));return function(){return s.apply(this,arguments)}}()()}),[t]),l=(0,u.useCallback)((function(e,n){return function(){var r=d(c().mark((function r(){var a,s;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t();case 2:return a=r.sent,r.next=5,a.setFlightLandedTime(e,n);case 5:return s=r.sent,r.next=8,s.wait();case 8:return r.abrupt("return",s.hash);case 9:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()()}),[t]),h=(0,u.useCallback)((function(e){return d(c().mark((function n(){var r,a,s;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t();case 2:return r=n.sent,n.next=5,r.flightIdToFlight(e);case 5:return a=n.sent,s={flightNumber:a.flightNumber,status:a.status,landedTime:new Date(1e3*a.landedTime.toNumber()),shouldLandTime:new Date(1e3*a.shouldLandTime.toNumber()),takeoffTime:new Date(1e3*a.takeoffTime.toNumber())},n.abrupt("return",s);case 8:case"end":return n.stop()}}),n)})))()}),[t]),f=(0,u.useCallback)((function(e,n){return d(c().mark((function r(){var a,s;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t();case 2:return a=r.sent,r.next=5,a.makePurchase(e,n);case 5:return s=r.sent,r.next=8,s.wait();case 8:return r.abrupt("return",s.hash);case 9:case"end":return r.stop()}}),r)})))()}),[t]),p=(0,u.useCallback)((function(e){return d(c().mark((function n(){var r,a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t();case 2:return r=n.sent,n.next=5,r.fetchYourPurchases(e);case 5:return a=n.sent,n.abrupt("return",a.map((function(e){return{id:e.id.toNumber(),flightId:e.flightId,completed:e.completed,packageId:e.packageId.toNumber(),customerAddress:e.customerAddress}})));case 7:case"end":return n.stop()}}),n)})))()}),[t]),m=(0,u.useCallback)((function(e){return d(c().mark((function n(){var r,a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t();case 2:return r=n.sent,n.next=5,r.claim(e);case 5:return a=n.sent,n.next=8,a.wait();case 8:return n.abrupt("return",a.hash);case 9:case"end":return n.stop()}}),n)})))()}),[t]);return{getTokenContract:t,createPackage:n,getPackages:r,createFlight:a,setFlightLanddedTime:l,getFlightDetailByFlightNumber:h,purchaseInsurance:f,getPurchases:p,claim:m}}!function(e){e[e.TAKEOFF=1]="TAKEOFF",e[e.LANDED=2]="LANDED",e[e.CANCEL=3]="CANCEL"}(r||(r={}))},4544:function(e,t,n){"use strict";n.r(t);var r=n(4051),a=n.n(r),c=n(5893),s=n(7294),u=n(5810);function i(e,t,n,r,a,c,s){try{var u=e[c](s),i=u.value}catch(o){return void n(o)}u.done?t(i):Promise.resolve(i).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function s(e){i(c,r,a,s,u,"next",e)}function u(e){i(c,r,a,s,u,"throw",e)}s(void 0)}))}}t.default=function(e){var t=(0,u.n)(),n=t.createPackage,r=t.getPackages,i=t.getFlightDetailByFlightNumber,l=t.createFlight,d=t.setFlightLanddedTime,h=(0,s.useState)(0),f=h[0],p=h[1],m=(0,s.useState)(0),x=m[0],v=m[1],g=(0,s.useState)(0),b=g[0],w=g[1],N=(0,s.useState)([]),k=N[0],j=N[1],y=(0,s.useState)(),C=y[0],P=y[1];(0,s.useEffect)((function(){(function(){var e=o(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:t=e.sent,j(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r]);var F=(0,s.useState)(""),T=F[0],S=F[1];function D(){return(D=o(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(T);case 2:if(t=e.sent,console.log("\ud83d\ude80 ~ file: admin.tsx ~ line 30 ~ checkFlightDetail ~ flight",t),0!=t.status){e.next=6;break}return e.abrupt("return");case 6:P(t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=(0,s.useState)(""),I=E[0],A=E[1],_=(0,s.useState)(""),L=_[0],O=_[1];function K(){return(K=o(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date(L).getTime()/1e3<<0,e.next=3,l(I,u.s.TAKEOFF,(new Date).getTime()/1e3<<0,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=(0,s.useState)(""),X=B[0],H=B[1];function Y(){return(Y=o(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date(X).getTime()/1e3<<0,e.abrupt("return",d(T,t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex justify-center mt-2 gap-1",children:[k.map((function(e,t){return(0,c.jsx)("div",{className:"card w-96 bg-orange-100",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("h2",{className:"card-title",children:"Packages"}),(0,c.jsxs)("div",{children:["packageId: ",e.id]}),(0,c.jsxs)("div",{children:["price: ",e.packagePrice]}),(0,c.jsxs)("div",{children:["cancel: ",e.cancelPrice]}),(0,c.jsxs)("div",{children:["delay: ",e.delayPrice]})]})},t)})),(0,c.jsx)("div",{className:"card w-96 bg-orange-100 ",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("h2",{className:"card-title",children:"Add New Packages"}),(0,c.jsxs)("div",{children:["price:"," ",(0,c.jsx)("input",{type:"number",className:"py-1 px-3 border-1",value:f,onChange:function(e){return p(Number.parseInt(e.target.value))}})]}),(0,c.jsxs)("div",{children:["cancel:"," ",(0,c.jsx)("input",{type:"number",className:"py-1 px-3 border-1",value:x,onChange:function(e){return v(Number.parseInt(e.target.value))}})]}),(0,c.jsxs)("div",{children:["delay:"," ",(0,c.jsx)("input",{type:"number",className:"py-1 px-3 border-1",value:b,onChange:function(e){return w(Number.parseInt(e.target.value))}})]}),(0,c.jsx)("div",{className:"justify-end card-actions",children:(0,c.jsx)("button",{className:"btn",onClick:function(){return n(f,x,b)},children:"Create"})})]})})]}),(0,c.jsxs)("div",{className:"flex gap-1 mt-2 justify-center",children:[(0,c.jsx)("div",{className:"card w-96 bg-blue-100 ",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("h2",{className:"card-title",children:"Flight"}),(0,c.jsxs)("div",{children:["Flight number:"," ",(0,c.jsx)("input",{type:"text",className:"py-1 px-3 border-1",value:T,onChange:function(e){return S(e.target.value)}})]}),C?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{children:["id: ",C.flightNumber]}),(0,c.jsxs)("div",{children:["takeoff: ",C.takeoffTime.toISOString()]}),(0,c.jsxs)("div",{children:["Should land time: ",C.shouldLandTime.toISOString()]}),(0,c.jsxs)("div",{children:["landed time: ",C.landedTime.toISOString()]})]}):"",(0,c.jsxs)("div",{children:["landed time:"," ",(0,c.jsx)("input",{type:"datetime-local",className:"py-1 px-3 border-1",value:X,onChange:function(e){return H(e.target.value)}})]}),(0,c.jsxs)("div",{className:"justify-between card-actions flex ",children:[(0,c.jsx)("button",{className:"btn",onClick:function(){return D.apply(this,arguments)},children:"Show Flight detail"}),(0,c.jsx)("button",{className:"btn",onClick:function(){return Y.apply(this,arguments)},children:"set landing time"})]})]})}),(0,c.jsx)("div",{className:"card w-96 bg-blue-100 ",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("h2",{className:"card-title",children:"Add Flight"}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"",children:"Flight number"}),(0,c.jsx)("input",{type:"text",className:"py-1 px-3 border-1",value:I,onChange:function(e){return A(e.target.value)}})]}),(0,c.jsxs)("div",{children:["shouldLandTime:"," ",(0,c.jsx)("input",{type:"datetime-local",className:"py-1 px-3 border-1",value:L,onChange:function(e){O(e.target.value)}})]}),(0,c.jsx)("div",{className:"justify-end card-actions",children:(0,c.jsx)("button",{className:"btn",onClick:function(){return K.apply(this,arguments)},children:"Create"})})]})})]})]})}}},function(e){e.O(0,[294,428,774,888,179],(function(){return t=2347,e(e.s=t);var t}));var t=e.O();_N_E=t}]);